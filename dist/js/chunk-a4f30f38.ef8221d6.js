(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a4f30f38"],{"44aa":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{"fill-height":"",fluid:""}},[r("v-row",{staticClass:"w-100 d-flex justify-center"},[r("v-row",{staticClass:"mb-8 w-100 d-flex justify-center"},[r("h2",{},[e._v("Add Enrolment")])]),r("v-divider"),r("v-col",[r("v-card",{staticClass:"p-4",attrs:{elevation:"7"}},[r("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.addEnrolment(e.form)}}},[r("div",{staticClass:"input-contain"},[r("v-autocomplete",{attrs:{hint:""+e.select.state,"persistent-hint":"","single-line":"","item-text":"state","item-value":"value",label:"Select",items:e.items,name:"status",id:"status","error-messages":e.statusErrors},on:{input:function(t){return e.$v.form.status.$touch()},blur:function(t){return e.$v.form.status.$touch()}},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1),e.errors.status?r("v-alert",{attrs:{dismissible:"",type:"error"}},[e._v(e._s(e.errors.status))]):e._e(),r("br"),r("div",{staticClass:"input-contain"},[r("v-autocomplete",{attrs:{items:e.courses,label:"Course","single-line":"","item-text":"title","item-value":"id","error-messages":e.course_idErrors},on:{input:function(t){return e.$v.form.course_id.$touch()},blur:function(t){return e.$v.form.course_id.$touch()}},model:{value:e.form.course_id,callback:function(t){e.$set(e.form,"course_id",t)},expression:"form.course_id"}})],1),e.errors.course_id?r("v-alert",{attrs:{dismissible:"",type:"error"}},[e._v(e._s(e.errors.course_id))]):e._e(),r("br"),r("div",{staticClass:"input-contain"},[r("v-autocomplete",{attrs:{items:e.lecturers,label:"Lecturer","single-line":"","item-text":"name","item-value":"id","error-messages":e.lecturer_idErrors},on:{input:function(t){return e.$v.form.lecturer_id.$touch()},blur:function(t){return e.$v.form.lecturer_id.$touch()}},model:{value:e.form.lecturer_id,callback:function(t){e.$set(e.form,"lecturer_id",t)},expression:"form.lecturer_id"}})],1),e.errors.lecturer_id?r("v-alert",{attrs:{dismissible:"",type:"error"}},[e._v(e._s(e.errors.lecturer_id))]):e._e(),r("br"),r("div",{staticClass:"input-contain"},[r("div",{staticClass:"mb-6"}),r("v-menu",{ref:"menu2",attrs:{"close-on-content-click":!0,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,s=t.attrs;return[r("v-text-field",e._g(e._b({attrs:{label:"Date","prepend-icon":"mdi-calendar",readonly:"","error-messages":e.dateErrors},on:{input:function(t){return e.$v.date.$touch()},blur:function(t){return e.$v.date.$touch()}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},"v-text-field",s,!1),i))]}}]),model:{value:e.date_menu,callback:function(t){e.date_menu=t},expression:"date_menu"}},[r("v-date-picker",{attrs:{"active-picker":e.activePicker,min:"1950-01-01"},on:{"update:activePicker":function(t){e.activePicker=t},"update:active-picker":function(t){e.activePicker=t},change:e.save},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1),e.errors.date?r("v-alert",{attrs:{dismissible:"",type:"error"}},[e._v(e._s(e.errors.date))]):e._e(),r("br"),r("div",{staticClass:"input-contain"},[r("div",{staticClass:"mb-6"},[r("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.time,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){e.time=t},"update:return-value":function(t){e.time=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,s=t.attrs;return[r("v-text-field",e._g(e._b({attrs:{label:"Picker in menu","prepend-icon":"mdi-clock-time-four-outline",readonly:"","error-messages":e.timeErrors},on:{input:function(t){return e.$v.time.$touch()},blur:function(t){return e.$v.time.$touch()}},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}},"v-text-field",s,!1),i))]}}]),model:{value:e.menu2,callback:function(t){e.menu2=t},expression:"menu2"}},[e.menu2?r("v-time-picker",{attrs:{"full-width":""},on:{"click:minute":function(t){return e.$refs.menu.save(e.time)}},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}):e._e()],1)],1)]),e.errors.time?r("v-alert",{attrs:{dismissible:"",type:"error"}},[e._v(e._s(e.errors.time))]):e._e(),r("br"),r("v-btn",{attrs:{type:"submit",color:"secondary"}},[e._v("Submit")]),r("v-btn",{staticClass:"ml-4",attrs:{color:"error"},on:{click:e.reset}},[e._v(" Reset Form ")])],1)],1)],1)],1)],1)},s=[],o=r("1da1"),a=(r("96cf"),r("bc3a")),n=r.n(a),u=r("1dce"),c=r("b5ae"),l={name:"coursesAdd",components:{},mixins:[u["validationMixin"]],data:function(){return{date_menu:!1,date:null,time:null,menu2:!1,modal2:!1,form:{status:"",course_id:"",lecturer_id:""},select:{state:"interested"},items:[{state:"interested",value:"interested"},{state:"assigned",value:"assigned"},{state:"career break",value:"career_break"},{state:"associate",value:"associate"}],courses:[],lecturers:[],errors:[]}},validations:{form:{status:{required:c["required"]},course_id:{required:c["required"],integer:c["integer"]},lecturer_id:{required:c["required"],integer:c["integer"]}},date:{required:c["required"]},time:{required:c["required"]}},computed:{statusErrors:function(){var e=[];return this.$v.form.status.$dirty?(!this.$v.form.status.required&&e.push("Status is required"),e):e},course_idErrors:function(){var e=[];return this.$v.form.course_id.$dirty?(!this.$v.form.course_id.required&&e.push("Course ID is required"),!this.$v.form.course_id.integer&&e.push("Course ID must be an integer"),e):e},lecturer_idErrors:function(){var e=[];return this.$v.form.lecturer_id.$dirty?(!this.$v.form.lecturer_id.required&&e.push("Lecturer ID is required"),!this.$v.form.lecturer_id.integer&&e.push("Lecturer ID must be an integer"),e):e},dateErrors:function(){var e=[];return this.$v.date.$dirty?(!this.$v.date.required&&e.push("Date is required"),e):e},timeErrors:function(){var e=[];return this.$v.time.$dirty?(!this.$v.time.required&&e.push("Time is required"),e):e}},mounted:function(){console.log(localStorage.getItem("token")),this.getCourses(),this.getLecturers()},methods:{reset:function(){this.$refs.form.reset(),this.$v.$reset()},addEnrolment:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:i=localStorage.getItem("token"),i||(t.$router.push({name:"home"}),t.$store.dispatch("toggleSnackbar",{text:"Login to add enrolments",timeout:6e3})),t.$v.$touch(),t.$v.$invalid||n.a.post("https://college-api-mo.herokuapp.com/api/enrolments",{status:e.status,course_id:e.course_id,lecturer_id:e.lecturer_id,date:t.date,time:t.time},{headers:{Authorization:"Bearer ".concat(i)}}).then((function(){t.$router.push({name:"enrolments_index"}),t.$store.dispatch("toggleSnackbar",{text:"Enrolment added successfully!",timeout:6e3})})).catch((function(e){console.log(e),t.$store.dispatch("toggleSnackbar",{text:"Something went wrong",timeout:6e3}),t.errors=e.response.data.errors}));case 4:case"end":return r.stop()}}),r)})))()},getCourses:function(){var e=this,t=localStorage.getItem("token");t||(this.$router.push({name:"home"}),this.$store.dispatch("toggleSnackbar",{text:"Login to add courses",timeout:6e3})),n.a.get("https://college-api-mo.herokuapp.com/api/courses",{headers:{Authorization:"Bearer ".concat(t)}}).then((function(t){e.courses=t.data.data})).catch((function(e){return console.log(e)}))},getLecturers:function(){var e=this,t=localStorage.getItem("token");n.a.get("https://college-api-mo.herokuapp.com/api/lecturers",{headers:{Authorization:"Bearer ".concat(t)}}).then((function(t){console.log("lecturers:"),console.log(t.data.data),e.lecturers=t.data.data})).catch((function(e){return console.log(e)}))}}},d=l,m=(r("8363"),r("2877")),v=r("6544"),f=r.n(v),p=r("0798"),h=r("c6a6"),_=r("8336"),g=r("b0af"),b=r("62ad"),$=r("a523"),k=r("2e4b"),x=r("ce7e"),y=r("4bd4"),q=r("e449"),w=r("0fd9"),C=r("8654"),E=r("c964"),S=Object(m["a"])(d,i,s,!1,null,"6fc37dea",null);t["default"]=S.exports;f()(S,{VAlert:p["a"],VAutocomplete:h["a"],VBtn:_["a"],VCard:g["a"],VCol:b["a"],VContainer:$["a"],VDatePicker:k["a"],VDivider:x["a"],VForm:y["a"],VMenu:q["a"],VRow:w["a"],VTextField:C["a"],VTimePicker:E["a"]})},8363:function(e,t,r){"use strict";r("85cc")},"85cc":function(e,t,r){}}]);
//# sourceMappingURL=chunk-a4f30f38.ef8221d6.js.map